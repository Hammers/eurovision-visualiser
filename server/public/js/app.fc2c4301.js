(function(){var t={8428:function(t,e,n){"use strict";var s,a=n(6369),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-100 app"},[e("router-view",t._b({on:{"submit-votes":t.submit,next:t.next,reset:t.reset,"bottom-seven":t.bottomSeven,top:t.top,audience:t.audience,"toggle-voting":t.toggleVoting,"toggle-results":t.toggleResults}},"router-view",t.currentProperties,!1))],1)},o=[],r=n(4069),l=n.n(r),c={data(){return{totals:{},votes:{},current:[],component:null,votingEnabled:!1,resultsEnabled:!1,audienceMode:!1,nextAudienceVote:null,totalVotes:0,votesDisplayed:0}},created(){this.getRealtimeData()},computed:{currentProperties:function(){return"/admin"===this.$route.path?{votes:this.votes,votingEnabled:this.votingEnabled,resultsEnabled:this.resultsEnabled,nextAudienceVote:this.nextAudienceVote}:{totals:this.totals,current:this.current,audienceMode:this.audienceMode,votingEnabled:this.votingEnabled,resultsEnabled:this.resultsEnabled,votesDisplayed:this.votesDisplayed,totalVotes:this.totalVotes}}},methods:{getRealtimeData(){console.log(this.$route),s="/admin"===this.$route.path?l().connect("/admin"):l().connect(),s.on("newdata",(t=>{console.log("data received"),console.log(t),this.totals=t.totals,this.current=t.current,this.audienceMode=t.audienceMode,this.votingEnabled=t.votingEnabled,this.resultsEnabled=t.resultsEnabled,this.totalVotes=t.totalVotes,this.votesDisplayed=t.votesDisplayed})),s.on("admindata",(t=>{console.log("data received"),console.log(t),this.votes=t.votes,this.votingEnabled=t.votingEnabled,this.resultsEnabled=t.resultsEnabled,this.nextAudienceVote=t.nextAudienceVote}))},submit(t){t.selected.reverse(),s.emit("submitVotes",t)},bottomSeven(t){s.emit("bottomSeven",{id:t})},top(t){s.emit("top",{id:t})},next(){s.emit("next")},reset(){s.emit("reset")},audience(){s.emit("audience")},toggleVoting(){s.emit("toggleVoting")},toggleResults(){s.emit("toggleResults")}}},u=c,d=n(1001),m=(0,d.Z)(u,i,o,!1,null,null,null),v=m.exports,g=(n(2166),function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid d-flex align-items-center justify-content-center"},[e("div",{staticClass:"row justify-content-center align-items-center w-100"},[e("div",{staticClass:"col-12 col-lg-5 my-0 mx-1 p-0"},[e("transition-group",{attrs:{tag:"div",name:"list"}},t._l(t.sortedTotals.firstHalf,(function(n){return e("div",{key:n.name,staticClass:"country-box m-1 w-100 text-light d-flex align-items-center",class:{selected:t.isSelected(n),unselected:!t.isSelected(n)}},[t.showNumberBox(n)?t._e():e("img",{staticClass:"flag h-100 me-3",attrs:{src:"flags/"+n.flag,alt:""}}),t.showNumberBox(n)?e("div",{staticClass:"number-box me-3 d-flex align-items-center justify-content-center text-center",class:t.getNumberClass(n)},[e("span",{staticClass:"align-middle"},[t._v(t._s(t.getValue(n)))])]):t._e(),e("div",{staticClass:"flex-grow-1"},[t._v(" "+t._s(n.name)+" ")]),e("div",{staticClass:"me-3 vote-total"},[t._v(t._s(n.value))])])})),0)],1),e("div",{staticClass:"col-12 col-lg-5 my-0 mx-1 p-0"},[e("transition-group",{attrs:{tag:"div",name:"list"}},t._l(t.sortedTotals.secondHalf,(function(n){return e("div",{key:n.name,staticClass:"country-box m-1 w-100 text-light d-flex align-items-center",class:{selected:t.isSelected(n),unselected:!t.isSelected(n)}},[t.showNumberBox(n)?t._e():e("img",{staticClass:"flag h-100 me-3",attrs:{src:"flags/"+n.flag,alt:""}}),t.showNumberBox(n)?e("div",{staticClass:"number-box me-3 d-flex align-items-center justify-content-center text-center",class:t.getNumberClass(n)},[e("span",{staticClass:"align-middle"},[t._v(t._s(t.getValue(n)))])]):t._e(),e("div",{staticClass:"flex-grow-1"},[t._v(" "+t._s(n.name)+" ")]),e("div",{staticClass:"me-5 vote-total"},[t._v(t._s(n.value))])])})),0)],1),e("div",{staticClass:"col-2 d-flex justify-content-center vote-text align-items-center"},[e("span",{staticClass:"vote-text-number mx-2"},[t._v(t._s(t.votesDisplayed))]),t._v(" OF "),e("span",{staticClass:"vote-text-number mx-2"},[t._v(t._s(t.totalVotes))]),t._v(" COUNTRIES VOTING ")]),e("div",{staticClass:"col-7"},[e("div",{staticClass:"progress"},[e("div",{staticClass:"progress-bar",style:{width:t.votePercent+"%"},attrs:{role:"progressbar","aria-valuenow":t.votePercent,"aria-valuemin":"0","aria-valuemax":"100"}})])])])])}),b=[],f=(n(7658),JSON.parse('[{"id":"sw","name":"Sweden","artist":"Anna Bergendahl","song":"Kingdom Come","flag":"sweden.png","number":1},{"id":"au","name":"Australia","artist":"Jaguar Jonze","song":"Rabbit Hole","flag":"serbia.png","number":2},{"id":"sl","name":"Slovenia","artist":"Lina Kuduzović","song":"Man Like You","flag":"slovenia.png","number":3},{"id":"li","name":"Lithuania","artist":"Moniqué","song":"Make Me Human","flag":"lithuania.png","number":4},{"id":"cr","name":"Croatia","artist":"Indira Levak","song":"You Will Never Break My Heart","flag":"croatia.png","number":5},{"id":"no","name":"Norway","artist":"Rein Alexander","song":"One Last Time","flag":"norway.png","number":6},{"id":"is","name":"Israel","artist":"Eden Alene","song":"Roots","flag":"israel.png","number":7},{"id":"ro","name":"Romania","artist":"Roxen","song":"Cherry Red","flag":"romania.png","number":8},{"id":"ur","name":"Ukraine","artist":"Khayat","song":"Call For Love","flag":"ukraine.png","number":9},{"id":"it","name":"Italy","artist":"Elodie","song":"Andromeda","flag":"italy.png","number":10},{"id":"es","name":"Estonia","artist":"Jaagup Tuisk","song":"Beautiful Lie","flag":"estonia.png","number":11},{"id":"sm","name":"San Marino","artist":"Senhit","song":"Obsessed","flag":"sanmarino.png","number":12},{"id":"cz","name":"Czech Republic","artist":"Elis Mraz feat. Čis T","song":"Wanna Be Like","flag":"czechrepublic.png","number":13},{"id":"se","name":"Serbia","artist":"Andrija Jo","song":"Oči Meduze","flag":"serbia.png","number":14},{"id":"po","name":"Poland","artist":"Albert Černý","song":"Lucy","flag":"poland.png","number":15},{"id":"ic","name":"Iceland","artist":"Dimma","song":"Almyrkvi","flag":"iceland.png","number":16},{"id":"de","name":"Denmark","artist":"Jasmine Rose ft. RoxorLoops","song":"Human","flag":"denmark.png","number":17},{"id":"ab","name":"Albania","artist":"Elvana Gatja","song":"Me Tana","flag":"albania.png","number":18},{"id":"fi","name":"Finland","artist":"Erika Vikman","song":"Cicciolina","flag":"finland.png","number":19},{"id":"ar","name":"Armenia","artist":"TOKIONINE","song":"Save Me","flag":"armenia.png","number":20},{"id":"pt","name":"Portugal","artist":"Bárbara Tinoco","song":"Passe-Partout","flag":"portugal.png","number":21},{"id":"la","name":"Latvia","artist":"Katrīna Dimanta","song":"Heartbeats","flag":"latvia.png","number":22}]')),p={name:"viewer-item",props:["totals","current","audienceMode","totalVotes","votesDisplayed"],data(){return{countries:f}},computed:{sortedTotals(){let t=[];for(var e=0;e<f.length;e++)t.push({id:f[e].id,name:f[e].name,value:this.totals[f[e].id],flag:f[e].flag});t=t.sort(((t,e)=>e.value-t.value));let n=t.splice(0,t.length/2);return{firstHalf:n,secondHalf:t}},votePercent(){return this.votesDisplayed/this.totalVotes*100}},methods:{isSelected(t){return this.current.find((e=>e.id===t.id))},showNumberBox(t){return this.audienceMode&&this.current.length>0?this.current[0].id===t.id:this.isSelected(t)},getValue(t){let e=this.current.find((e=>e.id===t.id));return e?e.value:0},getNumberClass(t){let e=this.getValue(t);return 12===e?"first":10===e?"second":8===e?"third":"other"}}},h=p,C=(0,d.Z)(h,g,b,!1,null,"845ab6c8",null),x=C.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container my-3"},[e("div",{staticClass:"card row justify-content-center"},[t._l(t.votes,(function(n,s){return e("div",{key:s},[e("div",[t._v(" "+t._s(n.name)+" - "),t._l(n.selected,(function(n){return e("span",{key:n,staticClass:"mx-1"},[t._v(t._s(t.getCountryName(n)))])}))],2),e("div",[e("button",{staticClass:"btn btn-primary",attrs:{disabled:n.indexDisplayed>=1},on:{click:function(e){return t.bottomSeven(n.id)}}},[t._v("1 - 7")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:n.indexDisplayed>=7},on:{click:function(e){return t.top(n.id)}}},[t._v("8")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:n.indexDisplayed>=8},on:{click:function(e){return t.top(n.id)}}},[t._v("10")]),e("button",{staticClass:"btn btn-primary",attrs:{disabled:n.indexDisplayed>=9},on:{click:function(e){return t.top(n.id)}}},[t._v("12")])])])})),e("hr"),e("div",{staticClass:"justify-content-center align-items-center d-flex m-2"},[e("button",{staticClass:"btn btn-primary m-2",on:{click:function(e){return t.next()}}},[t._v("Clear Highlighted")]),e("button",{staticClass:"btn btn-danger m-2",on:{click:function(e){return t.audience()}}},[t._v("Next Audience")])]),e("div",{staticClass:"justify-content-center align-items-center d-flex"},[e("button",{staticClass:"btn btn-primary m-2",on:{click:function(e){return t.toggleVoting()}}},[t._v("Toggle Voting")]),t._v(" "),e("span",[t._v(t._s(t.votingEnabled?"ON":"OFF"))]),e("button",{staticClass:"btn btn-primary m-2",on:{click:function(e){return t.toggleResults()}}},[t._v("Toggle Results")]),t._v(" "),e("span",[t._v(t._s(t.resultsEnabled?"ON":"OFF"))])]),e("div",{staticClass:"justify-content-center align-items-center d-flex m-2",attrs:{div:""}},[e("button",{staticClass:"btn btn-small btn-danger m-2",on:{click:function(e){return t.reset()}}},[t._v("Reset")])]),t.nextAudienceVote?e("div",{staticClass:"justify-content-center align-items-center d-flex m-2"},[e("span",[t._v("Next Audience Score: "+t._s(t.getCountryName(t.nextAudienceVote.id))+" - "+t._s(t.nextAudienceVote.score))])]):t._e()],2)])},_=[],w={name:"data-input",props:["votes","votingEnabled","resultsEnabled","nextAudienceVote"],data(){return{countries:f,resetConfirm:!1}},computed:{sortedCountries(){var t=this.countries;return t.sort(((t,e)=>t.name.localeCompare(e.name)))}},methods:{bottomSeven(t){this.$emit("bottom-seven",t)},top(t){this.$emit("top",t)},next(){this.$emit("next")},reset(){this.resetConfirm=!1,this.$emit("reset")},audience(){this.$emit("audience")},toggleVoting(){this.$emit("toggle-voting")},toggleResults(){this.$emit("toggle-results")},getCountryName(t){return this.countries.find((e=>e.id===t)).name}}},k=w,E=(0,d.Z)(k,y,_,!1,null,"4999518a",null),V=E.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container d-flex align-items-center justify-content-center mt-5"},[e("div",{staticClass:"row justify-content-center align-items-center w-100"},[e("div",{staticClass:"col-12 col-lg-8 form-inline w-100 justify-content-center"},[e("div",{staticClass:"d-flex form-group justify-content-center"},[e("label",{staticClass:"m-3",attrs:{for:"nameInput"}},[t._v("Your Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.votes.name,expression:"votes.name"}],staticClass:"form-control",attrs:{type:"text",id:"nameInput",placeholder:"Enter name..."},domProps:{value:t.votes.name},on:{input:function(e){e.target.composing||t.$set(t.votes,"name",e.target.value)}}}),e("span",{staticClass:"small-text w-25 m-3"},[t._v(" Ryan will use this to work out who's votes are who's so please make sure this is something recognisable!")])]),t._l(t.votes.selected,(function(n,s){return e("div",{key:s,staticClass:"country-box m-1 w-100 text-light d-flex align-items-center",class:{selected:""!==t.votes.selected[s],unselected:""===t.votes.selected[s]}},[e("div",{staticClass:"number-box me-3 d-flex align-items-center justify-content-center text-center",class:t.getNumberClass(s)},[e("span",{staticClass:"align-middle"},[t._v(t._s(t.points[s]))])]),""===t.votes.selected[s]?e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.votes.selected[s],expression:"votes.selected[index]"}],staticClass:"custom-select d-block w-100",attrs:{id:"vote"+s},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.votes.selected,s,e.target.multiple?n:n[0])}}},t._l(t.availableCountries(),(function(n){return e("option",{key:n.id,domProps:{value:n.id}},[t._v(t._s(n.number+" - "+n.name+" - "+n.artist+" - "+n.song))])})),0)]):e("div",[e("div",{staticClass:"flex-grow-1"},[t._v(" "+t._s(t.countries.find((e=>e.id===t.votes.selected[s])).name)+" "),e("button",{staticClass:"btn btn-danger btn-sm mx-2",on:{click:function(e){return t.removeVote(s)}}},[t._v("X")])])])])})),e("div",{staticClass:"d-flex justify-content-center"},[e("button",{staticClass:"btn btn-primary btn-lg",attrs:{disabled:!t.votes.selected.every((t=>""!==t))||""===t.votes.name},on:{click:t.submit}},[t._v("Submit")])])],2)])])},N=[],j={name:"voting-item",data(){return{points:[12,10,8,7,6,5,4,3,2,1],votes:{name:"",selected:["","","","","","","","","",""]},countries:f}},methods:{availableCountries(){let t=[];for(let e=0;e<f.length;e++)this.votes.selected.includes(f[e].id)||t.push(f[e]);return t},removeVote(t){console.log(t),this.votes.selected[t]="",this.$forceUpdate()},submit(){console.log(this.votes),this.$emit("submit-votes",this.votes),localStorage.vote2021=!0,this.$router.push("/")},getNumberClass(t){switch(t){case 0:return"first";case 1:return"second";case 2:return"third";default:return"other"}}}},O=j,A=(0,d.Z)(O,S,N,!1,null,"42272ec4",null),M=A.exports,R=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-body text-center h-100"},[e("div",{staticClass:"cover-container d-flex h-100 p-3 mx-auto flex-column"},[e("main",{staticClass:"inner cover",attrs:{role:"main"}},[e("img",{staticClass:"w-100",attrs:{src:"VirtualEurovisionLogo.png",alt:""}}),e("h1",{staticClass:"cover-heading pink"},[t._v("UNITED BY MUSIC")]),e("p",{staticClass:"lead"},[t._v("Here you will be able to submit your votes as well as watch the results be revealed live!")]),t.resultsEnabled?e("p",{staticClass:"lead"},[e("a",{staticClass:"btn btn-lg btn-primary",attrs:{href:"#"},on:{click:t.results}},[t._v("View Results")])]):e("p",{staticClass:"lead"},[t.voted?e("span",[t._v("Thanks for voting!")]):e("span",[t.votingEnabled?e("button",{staticClass:"btn btn-lg btn-primary",on:{click:t.vote}},[t._v("Submit Votes")]):e("span",[t._v("Voting will open after all acts have performed")])])])])])])},P=[],T={name:"home-item",props:["totals","current","audienceMode","votingEnabled","resultsEnabled"],data(){return{voted:!1}},mounted(){localStorage.vote2021&&(this.voted=!0)},methods:{vote(){this.$router.push("/vote")},results(){this.$router.push("/results")}}},D=T,$=(0,d.Z)(D,R,P,!1,null,"ec45614a",null),I=$.exports,L=n(2631);a.ZP.use(L.ZP);const B=[{path:"/reset",component:I,beforeEnter:(t,e,n)=>{delete localStorage.vote2020,n({path:"/"})}},{path:"/vote",component:M,beforeEnter:(t,e,n)=>{localStorage.vote2020?n({path:"/"}):n()}},{path:"/admin",component:V},{path:"/results",component:x},{path:"/",component:I}];var H=new L.ZP({mode:"history",routes:B});new a.ZP({render:t=>t(v),router:H}).$mount("#app")},7101:function(){}},e={};function n(s){var a=e[s];if(void 0!==a)return a.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,s,a,i){if(!s){var o=1/0;for(u=0;u<t.length;u++){s=t[u][0],a=t[u][1],i=t[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((function(t){return n.O[t](s[l])}))?s.splice(l--,1):(r=!1,i<o&&(o=i));if(r){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,a,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,i,o=s[0],r=s[1],l=s[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(l)var u=l(n)}for(e&&e(s);c<o.length;c++)i=o[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},s=self["webpackChunkclient"]=self["webpackChunkclient"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(8428)}));s=n.O(s)})();
//# sourceMappingURL=app.fc2c4301.js.map